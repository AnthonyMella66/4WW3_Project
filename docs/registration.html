<!DOCTYPE HTML>

<html lang="en">

<head>

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta charset="UTF-8"/>

<meta name="description" content="some html examples"/>

<meta name="keywords" content="examples"/>

<link rel="stylesheet" href="styles.css"/>

<meta name="viewport" content="width=device-width">

<link rel="shortcut icon" href="favicon.png" type="image/png" />

<title>User Registration</title>

<script type="text/javascript">
	//for both signin and register email fields
	function validateEmail(id){
		var x = document.getElementById(id);
		var emailPattern = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,})+$/;
		if (emailPattern.test(x.value)) {
			x.setAttribute("style", "background-color:white");
			return true;
		} else {
			console.log("latif");
			x.setAttribute("style", "background-color: pink");
			return false;
		}
	}
	//for both signin and register password fields
	function validatePassword(id) {
		var x = document.getElementById(id);
		//password should be composed of numbers and letters, minimal length 8
		var passwordPattern = /^[a-zA-Z0-9]+$/;
		console.log(passwordPattern.test(x.value));
		if (passwordPattern.test(x.value)) {
			x.setAttribute("style", "background-color:white");
			return true;
		} else {
			x.setAttribute("style", "background-color: pink");
			return false;
		}
	}

	//for entire sign in section
	function validateSignIn(emailId, passwordId){
		var x = validateEmail(emailId);
		var y = validatePassword(passwordId);
		if((x == true) && (y == true)){
			showLoader();
			return true;
		} else {
			window.alert("failed");
			return false;
		}
	}

	//registration first and last name simply cannot be empty
	function validateNameExists(nameId) {
		var x = document.getElementById(nameId);
		if ((x.value.length != 0)) {
			x.setAttribute("style", "background-color: white");
			return true;
		} else {
			x.setAttribute("style", "background-color: pink");
			return false;
		}
	}

	//register user name field
	function validateUserName(userNameId) {
		var x = document.getElementById(userNameId);
		var userNamePattern = /^[a-zA-Z0-9]+$/;
		if (userNamePattern.test(x.value)) {
			x.setAttribute("style", "background-color: white");
			return true;
		} else {
			x.setAttribute("style", "background-color: pink");
			return false;
		}
	}

	//on check fill in username field
	//note : only copy if email valid
	//this means checkbox will "check" but no copy, email box will show invalid however
	function completeUsername(checkBoxId, emailId, userNameId) {
		var checkStatus = document.getElementById(checkBoxId);
		var x = document.getElementById(emailId);
		var y = document.getElementById(userNameId);
		var emailValid = validateEmail(emailId);
		if (checkStatus.checked && (emailValid == true)) {
			y.value = x.value;
		}
	}

	//if check box checked then username and email should match
	function userNameEmailMatch(userNameId, emailId) {
		var x = document.getElementById(emailId);
		var y = document.getElementById(userNameId);
		if (x.value == y.value) {
			x.setAttribute("style", "background-color: white");
			y.setAttribute("style", "background-color: white");
			return true;
		} else {
			x.setAttribute("style", "background-color: pink");
			y.setAttribute("style", "background-color: pink");
			return false;
		}
	}

	//when confirming new password fields have to match
	function validatePasswordsMatch(passwordId, otherPasswordId) {
		var x = document.getElementById(passwordId);
		var y = document.getElementById(otherPasswordId);
		if (x.value == y.value){
			x.setAttribute("style", "background-color: white");
			y.setAttribute("style", "background-color: white");
			return true;
		} else {
			x.setAttribute("style", "background-color: pink");
			y.setAttribute("style", "background-color: pink");
			return false;
		}
	}

	//for complete registration form
	function validateRegistration() {
		var z = validateNameExists('registerFirstName');
		var w = validateNameExists('registerLastName');
		var x = validateEmail("registerEmail");
		var m = validateUserName("registerUserName");
		var checkStatus = document.getElementById("checkEmail");
		var emailMatch = true;
		var y = validatePasswordsMatch("registerFirstPass", "registerSecondPass");
		
		if (checkStatus.checked == true) {
			emailMatch = userNameEmailMatch("registerUserName", "registerEmail");
		}
		if ((x == true) && (y == true) && (z == true) && (w == true) && (emailMatch == true)){
			window.alert("registration passed");
			return true;
		} else {
			window.alert("failed");
			return false;
		}
	}
</script>

</head>

<body>
	<!-- Header with mobile scaling -->
	<div class="header">
 		<a id="headerTitle" href="#search.html" class="logo">Gas Station Reviews</a>
  		<div class="headerRight">
    		<a href="/search.html">Search</a>
   			<a href="/registration.html">Register</a>
  		</div>
	</div>

	<!-- registration page split into "sign in" and "register" -->
	<section>
		<div class="registration">
		<div class="signin">
			<form name="signInForm" onsubmit="return validateSignIn('signInEmail', 'signInPassword')" method="post">
				<h2>Sign In</h2>
				<p>Email</p>
				<input type="email" name="email" id="signInEmail" placeholder="example@mail.com"><br>
				<p>Password</p>
				<input type="password" name="pass" id="signInPassword"><br>
				<!-- <button type="submit" class="button_1" onclick="validatePassword()">Sign In</button><br> -->
				<button type="submit" class="button_1" >Sign In</button><br>
				<a href="newpassword.html" id="forgotPass">Forgot password?</a>
			</form>
		</div>
		<div class="register">
			<form name="registerForm" onsubmit="return validateRegistration()">
				<h2>Create an Account</h2>
				<div id="firstName">
					<p>First Name</p>
					<br>
					<input name="nameInput" id="registerFirstName" type="text" placeholder="First Name..">
				</div>
				<div id="lastName">
					<p>Last Name</p>
					<br>
					<input name="nameInput" id="registerLastName" type="text" placeholder="Last Name..">
				</div>
				<p >Email</p>
				<input type="email" name="email" id="registerEmail" placeholder="example@mail.com">
				<div id="emailCheck">
					<div id="emailCheckText">
						<p>Use email as username</p>
					</div>
					<div id="emailCheckBox">
						<input type="checkbox" id="checkEmail" onClick="completeUsername('checkEmail', 'registerEmail', 'registerUserName');">
					</div>
				</div>
				<p>User Name</p>
				<input type="text" name="username" id="registerUserName" placeholder="example@mail.com">
				
				<p>Create Password</p>
				<input type="password" name="pass" id="registerFirstPass">
				<p>Confirm Password</p>
				<input type="password" name="pass" id="registerSecondPass">
				<button type="submit" class="button_1">Create Account</button>
				
			</form>
		</div>

		</div>
	</section>

	<footer>
		<p>Gas Station Reviews - 4WW3</p>
	</footer>
</body>

</html>

